---
description: Guide to setting up Cloudflare R2 from scratch
---

# Cloudflare R2 Setup Guide

このガイドは、Cloudflareアカウントの作成からR2バケットの作成、そして公開設定までの手順を説明します。

## 1. Cloudflareアカウントの作成
1.  [Cloudflareのサインアップページ](https://dash.cloudflare.com/sign-up)にアクセスします。
2.  メールアドレスとパスワードを入力してアカウントを作成します。
3.  登録したメールアドレスに確認メールが届くので、リンクをクリックして認証を完了させます。

## 2. R2の有効化
1.  Cloudflareのダッシュボードにログインします。
2.  左側のサイドバーメニューから **[R2]** を選択します。
3.  初めて利用する場合は、プランの選択画面などが表示される場合があります。
    *   **重要**: R2には無料枠（10GBストレージ、月間1000万読み込み操作）がありますが、有効化にはクレジットカードまたはPayPal情報の登録が必要です（超過時のため）。
    *   情報を入力し、R2を有効化してください。

## 3. バケットの作成
画像を保存する「バケット（入れ物）」を作成します。

1.  R2のダッシュボードで **[Create bucket]** (バケットを作成) をクリックします。
2.  **Bucket name** (バケット名) を入力します。
    *   例: `boxing-club-assets`
    *   *※バケット名は全ユーザーで一意である必要はありませんが、わかりやすい名前を推奨します。*
3.  **Location** (場所) は `Automatic` のままで構いません（または `APAC` / `North America` など近い場所があれば選択）。
4.  **[Create bucket]** をクリックして作成完了です。

## 4. 公開アクセスの設定 (Public Access)
作成したバケットの画像をWebサイトで表示できるようにします。

1.  作成したバケットの詳細画面を開きます。
2.  **[Settings]** (設定) タブをクリックします。
3.  下にスクロールして **[Public Access]** セクションを見つけます。
4.  **[R2.dev subdomain]** の下にある **[Allow Access]** (アクセスを許可) をクリックします。
    *   *注意: R2.devドメインは開発用ですが、独自ドメインを設定するまではこれを使用するのが最も簡単です。*
    *   **[Allow]** と入力して確認します。
5.  表示された `https://pub-xxxxxxxxxxxx.r2.dev` のようなURLをコピーしてメモしておきます（これがあなたの画像のベースURLになります）。

## 5. テスト画像のアップロード
1.  バケットの **[Objects]** タブに戻ります。
2.  ここに適当な画像ファイル（例: 部員の写真など）をドラッグ＆ドロップしてアップロードします。
3.  アップロードされたファイル名をクリックし、右側に表示される詳細からURLを確認します。
4.  ブラウザでそのURLを開き、画像が表示されれば成功です！

---

## 次のステップへの準備
このワークフローが完了したら、AIアシスタントに以下の情報を伝えてください：

1.  **R2.devのサブドメインURL** (例: `https://pub-abc12345.r2.dev`)
2.  **作成したバケット名**

これらを元に、Next.jsの設定 (`next.config.ts`) を更新します。
